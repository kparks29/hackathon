!function(t){"use strict";t.module("HomeEditor.Utils",[])}(angular),function(t){"use strict";function e(){function t(t){if(!(t instanceof Object))throw new Error("Target prototype must be an object. Type received: "+typeof t);this._targetObject=t}function e(t,e,i){var o={};e&&(o.get=e),i&&(o.set=i),Object.defineProperty(this._targetObject,t,o)}function i(t,e){this.property(t,e,function(){throw new Error("Cannot modify read only property: "+t)})}function o(t,e){e||(e=t),this.property(t,function(){return this.payload[e]},function(t){this.payload[e]=t})}var n=t.prototype;return n.property=e,n.readOnlyProperty=i,n.proxyProperty=o,t}t.module("HomeEditor.Utils").factory("PropertyDefiner",e)}(angular),function(t){"use strict";function e(){function t(t){return o[t]}function e(t,e){if(arguments.length<2)throw new Error("InMemoryCache.set requires 2 arguments. Only received "+arguments.length);o[t]=e}function i(){o={}}var o={};return{get:t,set:e,clear:i}}t.module("HomeEditor.Utils").service("InMemoryCache",e)}(angular),function(t){"use strict";var e=["HomeEditor.Utils"];t.module("HomeEditor.Models",e)}(angular),function(t,e){"use strict";function i(){function t(t){this.internal=t||{}}return t.prototype.get=function(t){return e.get(this.internal,t)},t.prototype.set=function(t,i){if("string"==typeof t){if(e.isUndefined(i))throw new Error("BaseModel.set requires 2nd argument to be defined if the 1st argument is a string");e.set(this.internal,t,i)}else{if("object"!=typeof t)throw new Error("BaseModel.set requires first argument to be either a string or object");e.assign(this.internal,t)}},t}t.module("HomeEditor.Models").factory("BaseModel",i)}(angular,_),function(t,e,i){"use strict";function o(t,o,n,r,s){function a(e){t.call(this,e),this.initializeDocuments(),this.initializeImages(),this.initializeProperties()}function u(t){return e.map(t,function(t){return new r(t)})}function l(t){return e.pluck(t,"internal")}function c(t){return e.map(t,function(t){return new s(t)})}function d(t){return e.pluck(t,"internal")}a.prototype=Object.create(t.prototype),a.prototype.constructor=a;var h=a.prototype;return e.extend(h,o),e.extend(h,n),h.initializeProperties=function(){this.set("id",this.get("id")||i.guid()),this.set("features",this.get("features")||[]),this.set("appliances",this.get("appliances")||[]),this.set("notes",this.get("notes")||""),this.features=u(this.get("features"));var t=this;e.each(this.features,function(e){e.location=t}),this.appliances=c(this.get("appliances")),e.each(this.appliances,function(e){e.location=t})},h.addFeature=function(t){var e=new r(t);return e.location=this,this.features.push(e),this.get("features").push(e.internal),e},h.addAppliance=function(t){var e=new s(t);return e.location=this,this.appliances.push(e),this.get("appliances").push(e.internal),e},h.removeFeature=function(t){e.remove(this.get("features"),function(e){return e.id===t}),e.remove(this.features,function(e){return e.location=null,e.get("id")===t})},h.removeAppliance=function(t){e.remove(this.get("appliances"),function(e){return e.id===t}),e.remove(this.appliances,function(e){return e.location=null,e.get("id")===t})},h.rebuildSpaceModelInternal=function(){this.set("features",l(this.features)),this.set("appliances",d(this.appliances))},a}o.$inject=["BaseModel","ImageableModel","DocumentableModel","FeatureModel","ApplianceModel"],t.module("HomeEditor.Models").factory("SpaceModel",o)}(angular,_,chance),function(t,e){"use strict";function i(t,i){var o={initializeImages:function(){if(!(this instanceof t))throw new Error("ImageableModel can only be applied to a BaseModel object");this.set("images",this.get("images")||[]),this.set("primaryImage",this.get("primaryImage")||null),this.images=[]},getPrimaryImage:function(){return this.get("primaryImage")},setPrimaryImage:function(t){if(null!==t&&!e.includes(this.get("images"),t))throw new Error("Primary image can only be set to image contained in the images array");this.set("primaryImage",t)},addImage:function(t){var e=new i(t);return this.get("images").push(e.get("id")),this.images.push(e),e},removeImage:function(t){e.remove(this.get("images"),function(e){return e===t}),e.remove(this.images,function(e){return e.get("id")===t})},cloneImages:function(){return e.map(this.images,function(t){return new i(e.cloneDeep(t.internal))})}};return o}i.$inject=["BaseModel","FileModel"],t.module("HomeEditor.Models").factory("ImageableModel",i)}(angular,_),function(t,e){"use strict";function i(t,i){var o={initializeDocuments:function(){if(!(this instanceof t))throw new Error("DocumentableModel can only be applied to a BaseModel object");this.set("documents",this.get("documents")||[]),this.documents=[]},addDocument:function(t){var e=new i(t);return this.get("documents").push(e.internal.id),this.documents.push(e),e},removeDocument:function(t){e.remove(this.get("documents"),function(e){return e===t}),e.remove(this.documents,function(e){return e.get("id")===t})}};return o}i.$inject=["BaseModel","DocumentModel"],t.module("HomeEditor.Models").factory("DocumentableModel",i)}(angular,_),function(t,e,i){"use strict";function o(t){function i(t){this.payload=t||o()}function o(){var t=e.cloneDeep(a);return t}var n=i.prototype,r=new t(n),s=e.bind(r.proxyProperty,r);s("postalCode"),s("state"),s("street"),s("city"),s("unit");var a={postalCode:"",state:"",city:"",street:"",unit:""};return i}o.$inject=["PropertyDefiner"],t.module("HomeEditor.Models").factory("AddressModel",o)}(angular,_,chance),function(t,e,i){"use strict";function o(t,i,o,n,r){function s(e){t.call(this,e),this.initializeDocuments(),this.initializeImages(),this.initializeLotModelProperties()}s.prototype=Object.create(t.prototype),s.prototype.constructor=s;var a=s.prototype;return e.extend(a,i),e.extend(a,o),a.initializeLotModelProperties=function(){this.set("lotSize",this.get("lotSize")||0),this.modelType="LotModel"},s}o.$inject=["SpaceModel","ImageableModel","DocumentableModel","FeatureModel","ApplianceModel"],t.module("HomeEditor.Models").factory("LotModel",o)}(angular,_),function(t,e){"use strict";function i(t,i,o,n,r,s){function a(e){t.call(this,e),this.initializeDocuments(),this.initializeImages(),this.initializeStructureModelProperties()}function u(t){return e.map(t,function(t){return new s(t)})}function l(t){return e.pluck(t,"internal")}a.prototype=Object.create(t.prototype),a.prototype.constructor=a;var c=a.prototype;return e.extend(c,i),e.extend(c,o),c.initializeStructureModelProperties=function(){this.set("name",this.get("name")||""),this.set("structureType",this.get("structureType")||""),this.set("size",this.get("size")||0),this.set("levels",this.get("levels")||1),this.set("rooms",this.get("rooms")||[]),this.rooms=u(this.get("rooms"));var t=this;e.each(this.rooms,function(e){e.location=t}),this.modelType="StructureModel"},c.addRoom=function(t){var e=new s(t);return e.location=this,this.rooms.push(e),this.get("rooms").push(e.internal),e},c.removeRoom=function(t){e.remove(this.get("rooms"),function(e){return e.id===t}),e.remove(this.rooms,function(e){return e.location=null,e.get("id")===t})},c.rebuildStructureModelInternal=function(){this.rebuildSpaceModelInternal(),this.set("rooms",l(this.rooms))},a}i.$inject=["SpaceModel","ImageableModel","DocumentableModel","FeatureModel","ApplianceModel","RoomModel"],t.module("HomeEditor.Models").factory("StructureModel",i)}(angular,_),function(t,e){"use strict";function i(t,i,o,n,r){function s(e){t.call(this,e),this.initializeDocuments(),this.initializeImages(),this.initializeRoomModelProperties()}s.prototype=Object.create(t.prototype),s.prototype.constructor=s;var a=s.prototype;return e.extend(a,i),e.extend(a,o),a.initializeRoomModelProperties=function(){this.set("name",this.get("name")||""),this.set("roomType",this.get("roomType")||""),this.set("level",this.get("level")||1),this.set("size",this.get("size")||0),this.modelType="RoomModel"},a.location=null,s}i.$inject=["SpaceModel","ImageableModel","DocumentableModel","FeatureModel","ApplianceModel"],t.module("HomeEditor.Models").factory("RoomModel",i)}(angular,_),function(t,e,i){"use strict";function o(t,o,n){function r(e){t.call(this,e),this.initializeImages(),this.initializeDocuments(),this.initializeProperties()}r.prototype=Object.create(t.prototype),r.prototype.constructor=r;var s=r.prototype;return e.extend(s,o),e.extend(s,n),s.initializeProperties=function(){this.set("id",this.get("id")||i.guid()),this.set("name",this.get("name")||""),this.set("applianceId",this.get("applianceId")||""),this.modelType="ApplianceModel"},s.location=null,r}o.$inject=["BaseModel","ImageableModel","DocumentableModel"],t.module("HomeEditor.Models").factory("ApplianceModel",o)}(angular,_,chance),function(t,e,i){"use strict";function o(t,o,n){function r(e){t.call(this,e),this.initializeImages(),this.initializeDocuments(),this.initializeProperties()}r.prototype=Object.create(t.prototype),r.prototype.constructor=r;var s=r.prototype;return e.extend(s,o),e.extend(s,n),s.initializeProperties=function(){this.set("id",this.get("id")||i.guid()),this.set("name",this.get("name")||""),this.set("featureType",this.get("featureType")||""),this.modelType="FeatureModel"},s.location=null,r}o.$inject=["BaseModel","ImageableModel","DocumentableModel"],t.module("HomeEditor.Models").factory("FeatureModel",o)}(angular,_,chance),function(t,e){"use strict";function i(t,i,o,n,r,s){function a(e){t.call(this,e),this.initializeHomdnaModelProperties(),this.initializeDocuments(),this.initializeImages()}function u(t){return e.map(t,function(t){return new s(t)})}function l(t){return e.pluck(t,"internal")}a.prototype=Object.create(t.prototype),a.prototype.constructor=a;var c=a.prototype;return e.extend(c,i),e.extend(c,o),c.initializeHomdnaModelProperties=function(){var t=new r(this.get("lot"));this.set("lot",t.internal),this.lot=t,this.set("structures",this.get("structures")||[]),this.structures=u(this.get("structures")),this.set("notes",this.get("notes")||"")},c.removeStructure=function(t){e.remove(this.get("structures"),function(e){return e.id===t}),e.remove(this.structures,function(e){return e.get("id")===t})},c.addStructure=function(t){var e=new s(t);return this.structures.push(e),this.get("structures").push(e.internal),e},c.setLot=function(t){var e=new r(t);return this.lot=e,this.set("lot",e.internal),e},c.rebuildHomdnaModelInternal=function(){e.each(this.structures,function(t){t.rebuildStructureModelInternal()}),this.set("structures",l(this.structures)),this.set("lot",this.lot.internal)},c.getAllRooms=function(){return e(this.structures).pluck("rooms").flatten().value()},c.getAllSpaces=function(){return e.union([this.lot],this.structures,this.getAllRooms())},c.getAllFeatures=function(){return e(this.getAllSpaces()).pluck("features").flatten().compact().value()},c.getAllAppliances=function(){return e(this.getAllSpaces()).pluck("appliances").flatten().compact().value()},c.getAllDocumentables=function(){return e.union([this],this.getAllSpaces(),this.getAllFeatures(),this.getAllAppliances())},c.getAllDocuments=function(){return e(this.getAllDocumentables()).map(function(t){return t.get("documents")}).flatten().compact().value()},c.getAllSpacesAndElements=function(){return e.union(this.getAllSpaces(),this.getAllFeatures(),this.getAllAppliances())},c.getDocumentLocation=function(t){return e.find(this.getAllDocumentables(),function(i){return e.contains(i.get("documents"),t)})},a}i.$inject=["BaseModel","ImageableModel","DocumentableModel","AddressModel","LotModel","StructureModel"],t.module("HomeEditor.Models").factory("HomdnaModel",i)}(angular,_),function(t,e){"use strict";function i(t,i){function o(t){if(!t)throw new Error("Need to provide a file payload object to HomdnaMetaData constructor");this.payload=t}var n=o.prototype,r=new t(n),s=e.bind(r.proxyProperty,r);return s("id"),s("homeId"),s("currentVersion"),s("officialVersion"),s("isDemo"),s("homdnaPackageId"),r.readOnlyProperty("workflow",function(){return new i(this.payload.workflow)}),o}i.$inject=["PropertyDefiner","HomdnaWorkflowModel"],t.module("HomeEditor.Models").factory("HomdnaMetaDataModel",i)}(angular,_),function(t,e){"use strict";function i(t){function i(t){if(!t)throw new Error("Need to provide a payload object to HomdnaWorkflow constructor");this.payload=t}var o=i.prototype,n=new t(o),r=e.bind(n.proxyProperty,n);return r("completionPercentage"),r("stateId"),r("inspectorId"),r("realtorId"),r("primaryHomeOwnerId"),r("secondaryHomeOwnerId"),r("realtorMessage"),r("scheduleDate"),r("slotIndex"),r("submittedOn"),r("reviewStartedOn"),r("publishedOn"),r("scheduleNotes"),r("createdOn"),r("modifiedOn"),r("activatedOn"),r("registrationToken"),r("realtorStateId"),i}i.$inject=["PropertyDefiner"],t.module("HomeEditor.Models").factory("HomdnaWorkflowModel",i)}(angular,_),function(t,e){"use strict";function i(t,i){function o(t){if(!t)throw new Error("Need to provide a home payload object to Home constructor");this.payload=t}var n=o.prototype,r=new t(n),s=e.bind(r.proxyProperty,r);return s("name"),s("mlsId"),s("streetAddress"),s("unitAddress"),s("city"),s("state"),s("postalCode"),s("country"),s("latitude"),s("longitude"),s("primaryPhotoUrl"),s("primaryThumbnailUrl"),s("primaryLargeThumbnailUrl"),s("mapPhotoUrl"),s("streetPhotoUrl"),r.readOnlyProperty("activeHomdna",function(){return new i(this.payload.activeHomdna)}),o}i.$inject=["PropertyDefiner","HomdnaMetaDataModel"],t.module("HomeEditor.Models").factory("HomeModel",i)}(angular,_),function(t,e,i){"use strict";function o(t){function e(e){t.call(this,e),o.call(this)}function o(){this.set("id",this.get("id")||i.guid()),this.set("homdnaId",this.get("homdnaId")||null),this.set("checksum",this.get("checksum")||""),this.set("url",this.get("url")||""),this.set("thumbnailUrl",this.get("thumbnailUrl")||""),this.set("largeThumbnailUrl",this.get("largeThumbnailUrl")||""),this.set("mimeType",this.get("mimeType")||"")}e.prototype=Object.create(t.prototype),e.prototype.constructor=e;e.prototype;return e}o.$inject=["BaseModel"],t.module("HomeEditor.Models").factory("FileModel",o)}(angular,_,chance),function(t,e,i){"use strict";function o(t,o){function n(e){t.call(this,e),r.call(this)}function r(){this.set("id",this.get("id")||i.guid()),this.set("homdnaId",this.get("homdnaId")||null),this.set("documentType",this.get("documentType")||""),this.set("documentName",this.get("documentName")||""),this.set("description",this.get("description")||""),this.set("company",this.get("company")||""),this.set("amount",this.get("amount")||0),this.set("capitalExpediture",this.get("capitalExpediture")||!1),this.set("fileIds",this.get("fileIds")||[]),this.files=[]}n.prototype=Object.create(t.prototype),n.prototype.constructor=n;var s=n.prototype;return s.addFile=function(t){var e=new o(t);return this.files.push(e),this.get("fileIds").push(e.get("id")),e},s.removeFile=function(t){e.remove(this.get("fileIds"),function(e){return e===t}),e.remove(this.files,function(e){return e.get("id")===t})},n}o.$inject=["BaseModel","FileModel"],t.module("HomeEditor.Models").factory("DocumentModel",o)}(angular,_,chance);